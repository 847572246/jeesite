<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org" >
<head xmlns:th="http://java.sun.com/jsf/composite">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>jquery图形多选复选框 - 站长素材</title>
<script src="${ctxStatic}/checkbox/js/jquery.min.js?${_version}" type="text/javascript"></script>
<!--
<script src="${ctxStatic}/checkbox/css/main.css?${_version}" type="text/javascript"></script>
-->
	<script type="text/javascript">
	
$(document).ready(function() {

	/* see if anything is previously checked and reflect that in the view*/
	$(".checklist input:checked").parent().addClass("selected");
	
	/* handle the user selections */
	$(".checklist .checkbox-select").click(
		function(event) {
			event.preventDefault();
			$(this).parent().addClass("selected");
			$(this).parent().find(":checkbox").attr("checked","checked");
		}
	);
	
	$(".checklist .checkbox-deselect").click(
		function(event) {
			event.preventDefault();
			$(this).parent().removeClass("selected");
			$(this).parent().find(":checkbox").removeAttr("checked");
		}
	);
});
	function submitselect(){  //jquery获取复选框值 
		  var ids= new Array; 
		  var singlecount=new Array;
		  var multiplecount=new Array;
		  $('input[name="wrongRId"]:checked').each(function(){ 
			  ids.push($(this).val());
			  singlecount.push($(this).siblings('input[name="singlecount"]').val())
			  multiplecount.push($(this).siblings('input[name="multiplecount"]').val())
		  }); 
		  console.log(ids);
		  console.log(singlecount);
		  console.log(multiplecount);
		  $.ajax({
				url:'http://localhost:8080/jeesite-demo/a/wrongselect/wrongSelection/selectselection',
				type:'post',
				async:false,			
				data: {wrongreasonid:ids,singlecount:singlecount,multiplecount:multiplecount},
				traditional: true,
				success: function (data) { //返回json结果	
					/*for(var i=0;i<2;i++){
						console.log(data[0][0]+"爱国好饿日哦华贵而");
					}*/
				} 			
			});
	}
function AppendLink() {
    var div = document.getElementById("divMain");
    var linkTmp = document.createElement("a");
    linkTmp.href = "${ctx}/wrongselect/wrongSelection/listwrongreason";
    linkTmp.innerText = "百度";
    //链接要使用innertText,不能使用value
    div.appendChild(linkTmp);
}
	</script>
<style type="text/css">

body {
	font: 12px/1.3 "Lucida Grande","Lucida","Arial",Sans-serif;
}

form {
	margin: 0 0 30px 0;
}

legend {
	font-size: 17px;
}

fieldset {
	border: 0;
}

.checklist {
	list-style: none;
	margin: 0;
	padding: 0;
}

.checklist li {
	float: left;
	margin-right: 10px;
	background: url(../../../static/checkbox/checkboxbg.gif) no-repeat 0 0;
	width: 205px;
	height: 300px;
	position: relative;
	font: normal 11px/1.3 "Lucida Grande","Lucida","Arial",Sans-serif;
}

.checklist li.selected {
	background-position: -205px 0;
}

.checklist li.selected .checkbox-select {
	display: none;
}

.checkbox-select {
	display: block;
	float: left;
	position: absolute;
	top: 80%;
	left: 40%;
	width: 85px;
	height: 23px;
	background: url(../../../static/checkbox/select.gif) no-repeat 0 0;
	text-indent: -9999px;
}

.checklist li input {
	!* display: none;	 *!
}
.wrongRId{
display: none;
}

a.checkbox-deselect {
	display: none;
	color: white;
	font-weight: bold;
	text-decoration: none;
	position: absolute;
	top: 80%;
	right: 40%;
}

.checklist li.selected a.checkbox-deselect {
	display: block;
}

.checklist li label {
	display: block;
	text-align: center;
	padding: 8px;
}

.sendit {
	display: block;
	float: left;
	top: 118px;
	left: 10px;
	width: 115px;
	height: 34px;
	border: 0;
	cursor: pointer;
	background: url(../../../static/checkbox/sendit.gif ) no-repeat 0 0;
	text-indent: -9999px;
	margin: 20px 0;
}
.count{
	width:50px;
	top:70%;
}
</style>
	
	
	
</head>

<body>

<div id="" align="center">

	<form th:action="@{selectselection}">
		<fieldset>
			<legend>学生</legend>
			<%
				for(user in userwrongs){
			%>
				<ul class="checklist" id="checkbox" >
				<li>
					<input class="wrongRId" name="wrongRId"  value="${user.wrongReasonId}" type="checkbox"/>
					<label for="choice_'+i+'">${user.wrongReason}</label>
					<font size="" color="red"><label for="choice_'+i+'">错误次数:${user.flag}</label></font>
					<a class="checkbox-select" href="#">Select</a>
					<a class="checkbox-deselect" href="#">Cancel</a>
					<font>单选题数量</font>
					<input class="count" type="text" name="singlecount" id="" value="0" /><br>	
					<font>多选题数量</font>
					<input class="count" type="text" name="multiplecount" id="" value="0" />
					</li>				
				</ul>
					<%}%>
			<div style="clear: both;"></div>
			<button  class="sendit" type="submit" name="submitbutton" >确认</button>
            <input type="submit" value="提交"><!--onsubmit="submitselect()"-->
            <div id="sub"></div>
		</fieldset>
	</form>
</div>

<div id="divMain"></div>
<input type="button" value="添加链接" onclick="AppendLink()" />
</body>
</html>